<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Men√∫ Local | La Casona de 17</title>
  <link rel="icon" href="https://irbingestudios-sys.github.io/Restaurant/favicon.ico" />
  <link rel="stylesheet" href="https://irbingestudios-sys.github.io/Restaurant/src/css/menu_local.css">
  <style>
    /* Scroll vertical en el listado de productos */
    #modal-productos {
      max-height: 400px;
      overflow-y: auto;
      padding-right: 8px;
    }
    #modal-productos::-webkit-scrollbar {
      width: 8px;
    }
    #modal-productos::-webkit-scrollbar-thumb {
      background-color: #888;
      border-radius: 4px;
    }
    #modal-productos::-webkit-scrollbar-thumb:hover {
      background-color: #555;
    }
  </style>
</head>
<body>
  <div class="menu-container">
    <header>
      <img src="https://irbingestudios-sys.github.io/Restaurant/src/assets/logo.png" alt="Logo La Casona de 17" class="logo-login" />
      <h1 class="titulo-seccion">MEN√ö DIGITAL LOCAL</h1>
      <p>Clientes en mesa (QR)</p>
    </header>

    <!-- Acceso administraci√≥n -->
    <div class="admin-bar">
      <button id="btn-admin" class="btn-admin" onclick="abrirLogin()">Acceso administraci√≥n</button>
    </div>

    <!-- √Åreas activas din√°micas -->
    <section class="areas-container" aria-label="√Åreas activas"></section>

    <!-- Modal men√∫ por √°rea -->
    <div id="modal-menu" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modal-titulo">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modal-titulo">Men√∫</h3>
          <!-- Filtro de categor√≠a dentro del modal -->
          <select id="modal-filtro-categoria" onchange="abrirMenu(areaActual)">
            <option value="">Todas</option>
            <option value="panes">Panes</option>
            <option value="Pizzas y Pastas">Pizzas y Pastas</option>
            <option value="bebida">Bebidas</option>
            <option value="Postres">Postres</option>
          </select>
          <button class="btn-cerrar" onclick="cerrarModal()" aria-label="Cerrar">‚úñ</button>
        </div>
        <div id="modal-productos" class="modal-body"></div>
      </div>
    </div>

    <!-- Modal descripci√≥n producto -->
    <div id="modal-descripcion" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modal-descripcion-titulo">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modal-descripcion-titulo">Descripci√≥n</h3>
          <button class="btn-cerrar" onclick="cerrarModalDescripcion()" aria-label="Cerrar">‚úñ</button>
        </div>
        <div id="modal-descripcion-body" class="modal-body"></div>
      </div>
    </div>

    <!-- Modal login administraci√≥n -->
    <div id="modal-login" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modal-login-titulo">
      <div class="modal-content modal-narrow">
        <div class="modal-header">
          <h3 id="modal-login-titulo">üîë Acceso administraci√≥n</h3>
          <button class="btn-cerrar" onclick="cerrarLogin()" aria-label="Cerrar">‚úñ</button>
        </div>
        <div class="modal-body">
          <div class="form-grid-narrow">
            <input type="text" id="admin-user" placeholder="Usuario" />
            <input type="password" id="admin-pass" placeholder="Contrase√±a" />
            <button class="btn-primario" onclick="loginAdmin()">Entrar</button>
          </div>
          <p class="nota-login">Acceso para roles autorizados (super_admin, admin, gerente).</p>
        </div>
      </div>
    </div>

    <!-- Modal control de √°reas -->
    <div id="modal-areas" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modal-areas-titulo">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modal-areas-titulo">‚öôÔ∏è Control de √Åreas</h3>
          <button class="btn-cerrar" onclick="cerrarAreas()" aria-label="Cerrar">‚úñ</button>
        </div>
        <div class="modal-body">
          <div id="lista-areas" class="panel-grid"></div>
          <p class="nota-admin">Los cambios se reflejan en tiempo real en el men√∫ del cliente.</p>
        </div>
      </div>
    </div>

    <!-- Captaci√≥n de cliente -->
    <section id="whatsapp-invitacion" aria-label="Captaci√≥n de clientes para WhatsApp">
      <h3>üì≤ √önete al grupo de WhatsApp</h3>
      <div class="form-grid">
        <input type="text" id="cliente-nombre" placeholder="Tu nombre" />
        <input type="tel" id="cliente-telefono" placeholder="+53..." />
        <button class="btn-primario" onclick="unirseWhatsApp()">Unirme al grupo</button>
      </div>
    </section>

    <!-- Criterio de servicio -->
    <section id="criterio-servicio" aria-label="Emitir criterio del servicio">
      <h3>üìù Tu opini√≥n nos importa</h3>
      <div class="form-grid">
        <input type="text" id="criterio-nombre" placeholder="Tu nombre" />
        <input type="text" id="criterio-contacto" placeholder="Tel√©fono o correo" />
        <textarea id="criterio-texto" placeholder="Escribe tu opini√≥n..." rows="4"></textarea>
        <button class="btn-secundario" onclick="guardarCriterio()">Enviar criterio</button>
      </div>
    </section>

    <footer>
      <p>¬© La Casona de 17 - Men√∫ Local</p>
    </footer>
  </div>

  <!-- Supabase global -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Script principal -->
  <script src="https://irbingestudios-sys.github.io/Restaurant/src/js/menu_local.js"></script>
</body>
</html>
